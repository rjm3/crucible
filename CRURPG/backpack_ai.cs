// BACKPACK AI

function AI::SelectSpell(%list,%lvl)
{
	// echo("AISELECTSPELL " @ %list @ " " @ %lvl);
	%selected = "";
	for (%i = 0; (%g = getWord(%list,%i)) != -1; %i+=2) {
		%v = getWord(%list,%i+1);
		%r = MTRB(1,%v);
		if (%r == 1) %selected = %g;
	}
	if (%selected != "")
		return AI::SelectDoSpell(%selected,%lvl);
	else
		return "";
}

function AI::SelectDoSpell(%type,%lvl)
{
	%l = floor(%lvl/10);
	if (%l > 30) %l = 30;
	return $MDS[%type,%l];
}

function AI::Teleport(%id)
{
	echo(" AI TELEPORT " @ %id);
	%pos = GameBase::GetPosition(%id);
	%x = getWord(%pos,0);
	%y = getWord(%pos,1);
	%z = getWord(%pos,2) + 1.3;
	for (%i = 0; %i <= 20; %i++) {
		%r = MTRB(1,15);
		if (MTRB(1,2) == 1)
			%checkx = %x + %r;
		else
			%checkx = %x - %r;
		%r = MTRB(1,15);
		if (MTRB(1,2) == 1)
			%checky = %y + %r;
		else
			%checky = %y - %r;
		%check = %checkx @ " " @ %checky @ " " @ %z;
		%poso = %x @ " " @ %y @ " " @ %z;
		if (getlosinfo(%check,%poso,1) == False) {
			Gamebase::SetPosition(%id,%check);
			return;
		} 
	}
}

$MAGEDISTANCEMAX[FIRE] = 25;
$MAGEDISTANCEMIN[FIRE] = 5;
$MAGEDISTANCEMAX[COLD] = 15;
$MAGEDISTANCEMIN[COLD] = 5;
$MAGEDISTANCEMAX[ENERGY] = 15;
$MAGEDISTANCEMIN[ENERGY] = 5;
$MAGEDISTANCEMAX[POISON] = 5;
$MAGEDISTANCEMIN[POISON] = 0;
$MAGEDISTANCEMAX[MELEE] = 5;
$MAGEDISTANCEMIN[MELEE] = 0;
$MAGEDISTANCEMAX[PROJECTILE] = 25;
$MAGEDISTANCEMIN[PROJECTILE] = 5;

$MDS[FLASHSTRIKE,0] = "FLASHSTRIKE1";
$MDS[FLASHSTRIKE,1] = "FLASHSTRIKE1";
$MDS[FLASHSTRIKE,2] = "FLASHSTRIKE2";
$MDS[FLASHSTRIKE,3] = "FLASHSTRIKE3";
$MDS[FLASHSTRIKE,4] = "FLASHSTRIKE4";
$MDS[FLASHSTRIKE,5] = "FLASHSTRIKE5";
$MDS[FLASHSTRIKE,6] = "FLASHSTRIKE6";
$MDS[FLASHSTRIKE,7] = "FLASHSTRIKE7";
$MDS[FLASHSTRIKE,8] = "FLASHSTRIKE8";
$MDS[FLASHSTRIKE,9] = "FLASHSTRIKE9";
$MDS[FLASHSTRIKE,10] = "FLASHSTRIKE10";
$MDS[FLASHSTRIKE,11] = "FLASHSTRIKE11";
$MDS[FLASHSTRIKE,12] = "FLASHSTRIKE12";
$MDS[FLASHSTRIKE,13] = "FLASHSTRIKE13";
$MDS[FLASHSTRIKE,14] = "FLASHSTRIKE14";
$MDS[FLASHSTRIKE,15] = "FLASHSTRIKE15";
$MDS[FLASHSTRIKE,16] = "FLASHSTRIKE16";
$MDS[FLASHSTRIKE,17] = "FLASHSTRIKE17";
$MDS[FLASHSTRIKE,18] = "FLASHSTRIKE18";
$MDS[FLASHSTRIKE,19] = "FLASHSTRIKE19";
$MDS[FLASHSTRIKE,20] = "FLASHSTRIKE20";
$MDS[FLASHSTRIKE,21] = "FLASHSTRIKE21";
$MDS[FLASHSTRIKE,22] = "FLASHSTRIKE22";
$MDS[FLASHSTRIKE,23] = "FLASHSTRIKE23";
$MDS[FLASHSTRIKE,24] = "FLASHSTRIKE24";
$MDS[FLASHSTRIKE,25] = "FLASHSTRIKE25";
$MDS[FLASHSTRIKE,26] = "FLASHSTRIKE26";
$MDS[FLASHSTRIKE,27] = "FLASHSTRIKE27";
$MDS[FLASHSTRIKE,28] = "FLASHSTRIKE28";
$MDS[FLASHSTRIKE,29] = "FLASHSTRIKE29";
$MDS[FLASHSTRIKE,30] = "FLASHSTRIKE30";

$MDS[ARCANETHROW,0] = "ARCANETHROW1";
$MDS[ARCANETHROW,1] = "ARCANETHROW1";
$MDS[ARCANETHROW,2] = "ARCANETHROW2";
$MDS[ARCANETHROW,3] = "ARCANETHROW3";
$MDS[ARCANETHROW,4] = "ARCANETHROW4";
$MDS[ARCANETHROW,5] = "ARCANETHROW5";
$MDS[ARCANETHROW,6] = "ARCANETHROW6";
$MDS[ARCANETHROW,7] = "ARCANETHROW7";
$MDS[ARCANETHROW,8] = "ARCANETHROW8";
$MDS[ARCANETHROW,9] = "ARCANETHROW9";
$MDS[ARCANETHROW,10] = "ARCANETHROW10";
$MDS[ARCANETHROW,11] = "ARCANETHROW11";
$MDS[ARCANETHROW,12] = "ARCANETHROW12";
$MDS[ARCANETHROW,13] = "ARCANETHROW13";
$MDS[ARCANETHROW,14] = "ARCANETHROW14";
$MDS[ARCANETHROW,15] = "ARCANETHROW15";
$MDS[ARCANETHROW,16] = "ARCANETHROW16";
$MDS[ARCANETHROW,17] = "ARCANETHROW17";
$MDS[ARCANETHROW,18] = "ARCANETHROW18";
$MDS[ARCANETHROW,19] = "ARCANETHROW19";
$MDS[ARCANETHROW,20] = "ARCANETHROW20";
$MDS[ARCANETHROW,21] = "ARCANETHROW21";
$MDS[ARCANETHROW,22] = "ARCANETHROW22";
$MDS[ARCANETHROW,23] = "ARCANETHROW23";
$MDS[ARCANETHROW,24] = "ARCANETHROW24";
$MDS[ARCANETHROW,25] = "ARCANETHROW25";
$MDS[ARCANETHROW,26] = "ARCANETHROW26";
$MDS[ARCANETHROW,27] = "ARCANETHROW27";
$MDS[ARCANETHROW,28] = "ARCANETHROW28";
$MDS[ARCANETHROW,29] = "ARCANETHROW29";
$MDS[ARCANETHROW,30] = "ARCANETHROW30";

$MDS[KILLHOOK,0] = "KILLHOOK1";
$MDS[KILLHOOK,1] = "KILLHOOK1";
$MDS[KILLHOOK,2] = "KILLHOOK2";
$MDS[KILLHOOK,3] = "KILLHOOK3";
$MDS[KILLHOOK,4] = "KILLHOOK4";
$MDS[KILLHOOK,5] = "KILLHOOK5";
$MDS[KILLHOOK,6] = "KILLHOOK6";
$MDS[KILLHOOK,7] = "KILLHOOK7";
$MDS[KILLHOOK,8] = "KILLHOOK8";
$MDS[KILLHOOK,9] = "KILLHOOK9";
$MDS[KILLHOOK,10] = "KILLHOOK10";
$MDS[KILLHOOK,11] = "KILLHOOK11";
$MDS[KILLHOOK,12] = "KILLHOOK12";
$MDS[KILLHOOK,13] = "KILLHOOK13";
$MDS[KILLHOOK,14] = "KILLHOOK14";
$MDS[KILLHOOK,15] = "KILLHOOK15";
$MDS[KILLHOOK,16] = "KILLHOOK16";
$MDS[KILLHOOK,17] = "KILLHOOK17";
$MDS[KILLHOOK,18] = "KILLHOOK18";
$MDS[KILLHOOK,19] = "KILLHOOK19";
$MDS[KILLHOOK,20] = "KILLHOOK20";
$MDS[KILLHOOK,21] = "KILLHOOK21";
$MDS[KILLHOOK,22] = "KILLHOOK22";
$MDS[KILLHOOK,23] = "KILLHOOK23";
$MDS[KILLHOOK,24] = "KILLHOOK24";
$MDS[KILLHOOK,25] = "KILLHOOK25";
$MDS[KILLHOOK,26] = "KILLHOOK26";
$MDS[KILLHOOK,27] = "KILLHOOK27";
$MDS[KILLHOOK,28] = "KILLHOOK28";
$MDS[KILLHOOK,29] = "KILLHOOK29";
$MDS[KILLHOOK,30] = "KILLHOOK30";

$MDS[KILLSHOT,0] = "KILLSHOT1";
$MDS[KILLSHOT,1] = "KILLSHOT1";
$MDS[KILLSHOT,2] = "KILLSHOT2";
$MDS[KILLSHOT,3] = "KILLSHOT3";
$MDS[KILLSHOT,4] = "KILLSHOT4";
$MDS[KILLSHOT,5] = "KILLSHOT5";
$MDS[KILLSHOT,6] = "KILLSHOT6";
$MDS[KILLSHOT,7] = "KILLSHOT7";
$MDS[KILLSHOT,8] = "KILLSHOT8";
$MDS[KILLSHOT,9] = "KILLSHOT9";
$MDS[KILLSHOT,10] = "KILLSHOT10";
$MDS[KILLSHOT,11] = "KILLSHOT11";
$MDS[KILLSHOT,12] = "KILLSHOT12";
$MDS[KILLSHOT,13] = "KILLSHOT13";
$MDS[KILLSHOT,14] = "KILLSHOT14";
$MDS[KILLSHOT,15] = "KILLSHOT15";
$MDS[KILLSHOT,16] = "KILLSHOT16";
$MDS[KILLSHOT,17] = "KILLSHOT17";
$MDS[KILLSHOT,18] = "KILLSHOT18";
$MDS[KILLSHOT,19] = "KILLSHOT19";
$MDS[KILLSHOT,20] = "KILLSHOT20";
$MDS[KILLSHOT,21] = "KILLSHOT21";
$MDS[KILLSHOT,22] = "KILLSHOT22";
$MDS[KILLSHOT,23] = "KILLSHOT23";
$MDS[KILLSHOT,24] = "KILLSHOT24";
$MDS[KILLSHOT,25] = "KILLSHOT25";
$MDS[KILLSHOT,26] = "KILLSHOT26";
$MDS[KILLSHOT,27] = "KILLSHOT27";
$MDS[KILLSHOT,28] = "KILLSHOT28";
$MDS[KILLSHOT,29] = "KILLSHOT29";
$MDS[KILLSHOT,30] = "KILLSHOT30";

$MDS[SNAKEGRASP,0] = "SNAKEGRASP1";
$MDS[SNAKEGRASP,1] = "SNAKEGRASP1";
$MDS[SNAKEGRASP,2] = "SNAKEGRASP2";
$MDS[SNAKEGRASP,3] = "SNAKEGRASP3";
$MDS[SNAKEGRASP,4] = "SNAKEGRASP4";
$MDS[SNAKEGRASP,5] = "SNAKEGRASP5";
$MDS[SNAKEGRASP,6] = "SNAKEGRASP6";
$MDS[SNAKEGRASP,7] = "SNAKEGRASP7";
$MDS[SNAKEGRASP,8] = "SNAKEGRASP8";
$MDS[SNAKEGRASP,9] = "SNAKEGRASP9";
$MDS[SNAKEGRASP,10] = "SNAKEGRASP10";
$MDS[SNAKEGRASP,11] = "SNAKEGRASP11";
$MDS[SNAKEGRASP,12] = "SNAKEGRASP12";
$MDS[SNAKEGRASP,13] = "SNAKEGRASP13";
$MDS[SNAKEGRASP,14] = "SNAKEGRASP14";
$MDS[SNAKEGRASP,15] = "SNAKEGRASP15";
$MDS[SNAKEGRASP,16] = "SNAKEGRASP16";
$MDS[SNAKEGRASP,17] = "SNAKEGRASP17";
$MDS[SNAKEGRASP,18] = "SNAKEGRASP18";
$MDS[SNAKEGRASP,19] = "SNAKEGRASP19";
$MDS[SNAKEGRASP,20] = "SNAKEGRASP20";
$MDS[SNAKEGRASP,21] = "SNAKEGRASP21";
$MDS[SNAKEGRASP,22] = "SNAKEGRASP22";
$MDS[SNAKEGRASP,23] = "SNAKEGRASP23";
$MDS[SNAKEGRASP,24] = "SNAKEGRASP24";
$MDS[SNAKEGRASP,25] = "SNAKEGRASP25";
$MDS[SNAKEGRASP,26] = "SNAKEGRASP26";
$MDS[SNAKEGRASP,27] = "SNAKEGRASP27";
$MDS[SNAKEGRASP,28] = "SNAKEGRASP28";
$MDS[SNAKEGRASP,29] = "SNAKEGRASP29";
$MDS[SNAKEGRASP,30] = "SNAKEGRASP30";

$MDS[FIRE,0] = "FIREBALL";
$MDS[FIRE,1] = "FIREBALL1";
$MDS[FIRE,2] = "FIREBALL2";
$MDS[FIRE,3] = "FIREBALL3";
$MDS[FIRE,4] = "FIREBALL4";
$MDS[FIRE,5] = "FIREBALL5";
$MDS[FIRE,6] = "SMOKE1";
$MDS[FIRE,7] = "SMOKE2";
$MDS[FIRE,8] = "SMOKE3";
$MDS[FIRE,9] = "SMOKE4";
$MDS[FIRE,10] = "SMOKE5";
$MDS[FIRE,11] = "MELT1";
$MDS[FIRE,12] = "MELT2";
$MDS[FIRE,13] = "MELT3";
$MDS[FIRE,14] = "MELT4";
$MDS[FIRE,15] = "MELT5";
$MDS[FIRE,16] = "MAGMA1";
$MDS[FIRE,17] = "MAGMA2";
$MDS[FIRE,18] = "MAGMA3";
$MDS[FIRE,19] = "MAGMA4";
$MDS[FIRE,20] = "MAGMA5";
$MDS[FIRE,21] = "FIRESTORM1";
$MDS[FIRE,22] = "FIRESTORM2";
$MDS[FIRE,23] = "FIRESTORM3";
$MDS[FIRE,24] = "FIRESTORM4";
$MDS[FIRE,25] = "FIRESTORM5";
$MDS[FIRE,26] = "HELLFIRE1";
$MDS[FIRE,27] = "HELLFIRE2";
$MDS[FIRE,28] = "HELLFIRE3";
$MDS[FIRE,29] = "HELLFIRE4";
$MDS[FIRE,30] = "HELLFIRE5";

$MDS[COLD,0] = "ICICLE";
$MDS[COLD,1] = "ICICLE1";
$MDS[COLD,2] = "ICICLE2";
$MDS[COLD,3] = "ICICLE3";
$MDS[COLD,4] = "ICICLE4";
$MDS[COLD,5] = "ICICLE5";
$MDS[COLD,6] = "FROST1";
$MDS[COLD,7] = "FROST2";
$MDS[COLD,8] = "FROST3";
$MDS[COLD,9] = "FROST4";
$MDS[COLD,10] = "FROST5";
$MDS[COLD,11] = "HAIL1";
$MDS[COLD,12] = "HAIL2";
$MDS[COLD,13] = "HAIL3";
$MDS[COLD,14] = "HAIL4";
$MDS[COLD,15] = "HAIL5";
$MDS[COLD,16] = "SNOWSTORM1";
$MDS[COLD,17] = "SNOWSTORM2";
$MDS[COLD,18] = "SNOWSTORM3";
$MDS[COLD,19] = "SNOWSTORM4";
$MDS[COLD,20] = "SNOWSTORM5";
$MDS[COLD,21] = "AVALANCHE1";
$MDS[COLD,22] = "AVALANCHE2";
$MDS[COLD,23] = "AVALANCHE3";
$MDS[COLD,24] = "AVALANCHE4";
$MDS[COLD,25] = "AVALANCHE5";
$MDS[COLD,26] = "ICETWISTER1";
$MDS[COLD,27] = "ICETWISTER2";
$MDS[COLD,28] = "ICETWISTER3";
$MDS[COLD,29] = "ICETWISTER4";
$MDS[COLD,30] = "ICETWISTER5";

$MDS[ENERGY,0] = "SPARK";
$MDS[ENERGY,1] = "SPARK1";
$MDS[ENERGY,2] = "SPARK2";
$MDS[ENERGY,3] = "SPARK3";
$MDS[ENERGY,4] = "SPARK4";
$MDS[ENERGY,5] = "SPARK5";
$MDS[ENERGY,6] = "SHOCK1";
$MDS[ENERGY,7] = "SHOCK2";
$MDS[ENERGY,8] = "SHOCK3";
$MDS[ENERGY,9] = "SHOCK4";
$MDS[ENERGY,10] = "SHOCK5";
$MDS[ENERGY,11] = "BOLT1";
$MDS[ENERGY,12] = "BOLT2";
$MDS[ENERGY,13] = "BOLT3";
$MDS[ENERGY,14] = "BOLT4";
$MDS[ENERGY,15] = "BOLT5";
$MDS[ENERGY,16] = "LIGHTNING1";
$MDS[ENERGY,17] = "LIGHTNING2";
$MDS[ENERGY,18] = "LIGHTNING3";
$MDS[ENERGY,19] = "LIGHTNING4";
$MDS[ENERGY,20] = "LIGHTNING5";
$MDS[ENERGY,21] = "SUPERNOVA1";
$MDS[ENERGY,22] = "SUPERNOVA2";
$MDS[ENERGY,23] = "SUPERNOVA3";
$MDS[ENERGY,24] = "SUPERNOVA4";
$MDS[ENERGY,25] = "SUPERNOVA5";
$MDS[ENERGY,26] = "RIFT1";
$MDS[ENERGY,27] = "RIFT2";
$MDS[ENERGY,28] = "RIFT3";
$MDS[ENERGY,29] = "RIFT4";
$MDS[ENERGY,30] = "RIFT5";

$MDS[POISON,0] = "THORN";
$MDS[POISON,1] = "THORN1";
$MDS[POISON,2] = "THORN2";
$MDS[POISON,3] = "THORN3";
$MDS[POISON,4] = "THORN4";
$MDS[POISON,5] = "THORN5";
$MDS[POISON,6] = "VIPER1";
$MDS[POISON,7] = "VIPER2";
$MDS[POISON,8] = "VIPER3";
$MDS[POISON,9] = "VIPER4";
$MDS[POISON,10] = "VIPER5";
$MDS[POISON,11] = "PLAGUE1";
$MDS[POISON,12] = "PLAGUE2";
$MDS[POISON,13] = "PLAGUE3";
$MDS[POISON,14] = "PLAGUE4";
$MDS[POISON,15] = "PLAGUE5";
$MDS[POISON,16] = "COBRA1";
$MDS[POISON,17] = "COBRA2";
$MDS[POISON,18] = "COBRA3";
$MDS[POISON,19] = "COBRA4";
$MDS[POISON,20] = "COBRA5";
$MDS[POISON,21] = "SWARM1";
$MDS[POISON,22] = "SWARM2";
$MDS[POISON,23] = "SWARM3";
$MDS[POISON,24] = "SWARM4";
$MDS[POISON,25] = "SWARM5";
$MDS[POISON,26] = "BLACKDEATH1";
$MDS[POISON,27] = "BLACKDEATH2";
$MDS[POISON,28] = "BLACKDEATH3";
$MDS[POISON,29] = "BLACKDEATH4";
$MDS[POISON,30] = "BLACKDEATH5";

$MDS[MELEE,0] = "IRONFIST";
$MDS[MELEE,1] = "IRONFIST1";
$MDS[MELEE,2] = "IRONFIST2";
$MDS[MELEE,3] = "IRONFIST3";
$MDS[MELEE,4] = "IRONFIST4";
$MDS[MELEE,5] = "IRONFIST5";
$MDS[MELEE,6] = "CHAOSSLASH1";
$MDS[MELEE,7] = "CHAOSSLASH2";
$MDS[MELEE,8] = "CHAOSSLASH3";
$MDS[MELEE,9] = "CHAOSSLASH4";
$MDS[MELEE,10] = "CHAOSSLASH5";
$MDS[MELEE,11] = "POWERPUNCH1";
$MDS[MELEE,12] = "POWERPUNCH2";
$MDS[MELEE,13] = "POWERPUNCH3";
$MDS[MELEE,14] = "POWERPUNCH4";
$MDS[MELEE,15] = "POWERPUNCH5";
$MDS[MELEE,16] = "CHAOSCLAWS1";
$MDS[MELEE,17] = "CHAOSCLAWS2";
$MDS[MELEE,18] = "CHAOSCLAWS3";
$MDS[MELEE,19] = "CHAOSCLAWS4";
$MDS[MELEE,20] = "CHAOSCLAWS5";
$MDS[MELEE,21] = "THORSHAMMER1";
$MDS[MELEE,22] = "THORSHAMMER2";
$MDS[MELEE,23] = "THORSHAMMER3";
$MDS[MELEE,24] = "THORSHAMMER4";
$MDS[MELEE,25] = "THORSHAMMER5";
$MDS[MELEE,26] = "SWORDSTORM1";
$MDS[MELEE,27] = "SWORDSTORM2";
$MDS[MELEE,28] = "SWORDSTORM3";
$MDS[MELEE,29] = "SWORDSTORM4";
$MDS[MELEE,30] = "SWORDSTORM5";

$MDS[PROJECTILE,0] = "ROCK";
$MDS[PROJECTILE,1] = "ROCK1";
$MDS[PROJECTILE,2] = "ROCK2";
$MDS[PROJECTILE,3] = "ROCK3";
$MDS[PROJECTILE,4] = "ROCK4";
$MDS[PROJECTILE,5] = "ROCK5";
$MDS[PROJECTILE,6] = "CHAOSKNIFE1";
$MDS[PROJECTILE,7] = "CHAOSKNIFE2";
$MDS[PROJECTILE,8] = "CHAOSKNIFE3";
$MDS[PROJECTILE,9] = "CHAOSKNIFE4";
$MDS[PROJECTILE,10] = "CHAOSKNIFE5";
$MDS[PROJECTILE,11] = "VOLLEY1";
$MDS[PROJECTILE,12] = "VOLLEY2";
$MDS[PROJECTILE,13] = "VOLLEY3";
$MDS[PROJECTILE,14] = "VOLLEY4";
$MDS[PROJECTILE,15] = "VOLLEY5";
$MDS[PROJECTILE,16] = "TORNADO1";
$MDS[PROJECTILE,17] = "TORNADO2";
$MDS[PROJECTILE,18] = "TORNADO3";
$MDS[PROJECTILE,19] = "TORNADO4";
$MDS[PROJECTILE,20] = "TORNADO5";
$MDS[PROJECTILE,21] = "CHAOSARROW1";
$MDS[PROJECTILE,22] = "CHAOSARROW2";
$MDS[PROJECTILE,23] = "CHAOSARROW3";
$MDS[PROJECTILE,24] = "CHAOSARROW4";
$MDS[PROJECTILE,25] = "CHAOSARROW5";
$MDS[PROJECTILE,26] = "METEOR1";
$MDS[PROJECTILE,27] = "METEOR2";
$MDS[PROJECTILE,28] = "METEOR3";
$MDS[PROJECTILE,29] = "METEOR4";
$MDS[PROJECTILE,30] = "METEOR5";

echo("__BACKPACK AI LOADED");